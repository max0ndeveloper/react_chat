{"version":3,"sources":["components/Context/authContext/AuthContext.js","components/UI/Buttons/MainButton/MainButton.js","components/Auth/FormTabs/FormTabs.js","services/initFirebase.js","components/Firebase/Firebase.js","components/Context/preloaderContext/preloaderContext.js","components/hoc/wrapOverlay/wrapOverlay.js","components/UI/Modal/Modal.js","components/UI/Input/Input.js","components/UI/IconEye/Icon.js","components/hoc/withClass/withClass.js","components/hoc/Wrapper/Wrapper.js","components/Auth/FormLogin/FormLogin.js","components/Auth/FormRegister/FormRegister.js","components/Context/modalContext/modalContext.js","components/Auth/Auth.js","components/UI/Modal/ModalWithReducer.js","components/UI/Preloader/Preloader.js","components/Context/firebaseContext/FirebaseContext.js","components/Head/BtnComeBack/BtnComeBack.js","components/Head/Avatar/Avatar.js","components/Head/UserName/UserName.js","components/Status/Status.js","components/Head/Head.js","components/Messages/MessagesItem/MassagesItem.js","components/Messages/ButtonSend/ButtonSend.js","components/Messages/SendArea/SendArea.js","components/Messages/Messages.js","components/LastMessage/LastMessage.js","components/LastMessage/TimeLastMessage/TimeLastMessage.js","components/ContactCard/ContactCards.js","pages/MessagesPreloader.js","components/Contacts/Contacts.js","pages/Home.js","App.js","serviceWorker.js","components/Context/type.js","components/Context/modalContext/modalReducer.js","components/Context/modalContext/ModalState.js","components/Context/preloaderContext/preloaderReducer.js","components/Context/preloaderContext/PreloaderState.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","Provider","value","displayName","MainButton","className","disabled","type","active","onClick","attrs","classes","classNames","Tag","href","e","preventDefault","defaultProps","FormTabs","props","styleTabsSlider","styleButtonTabSignIn","styleButtonTabRegister","setIsActive","style","app","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","this","auth","db","database","presence","ref","users","messages","once","then","snapshot","val","Error","console","log","email","password","createUserWithEmailAndPassword","name","history","signInWithEmailAndPassword","updateProfile","push","signOut","quote","doc","uid","set","alert","Promise","resolve","onAuthStateChanged","get","PreloaderContext","wrapOverlay","Component","Modal","title","isOpen","onSubmit","Input","id","inputClass","labelClass","onChange","classesInput","classesLabel","inputType","key","htmlFor","eye","Icon","size","classI","func","iconSize","fontSize","withClass","tag","Wrapper","showPasswordOrText","eyeShowHide","checkEye","login","useContext","hidePreloader","showPreloader","setIsOpen","messageErrEmailOrUser","setMessageErrEmailOrUser","setTitle","count","setCount","useEffect","timer","setInterval","c","clearInterval","usernameValue","setUsernameValue","passwordValue","setPasswordValue","userValid","setUserValid","passwordValid","setPasswordValid","showButton","setShowButton","length","action","placeholder","event","target","dataUsers","child","update","userName","onlineStatus","onDisconnect","remove","signIn","onRegister","registerInFirebase","registration","modalShow","modalHide","data","checkEmail","Object","keys","forEach","user","checkEmailToDatabase","preAction","state","dataInput","username","validLabel","label","errorMessage","valid","touched","wrapperClassName","formName","iClass","validation","required","minLength","checkbox","checked","formValid","elem","currentValue","switchLabel","addValidValue","isElementValid","test","setState","map","index","currentDataInput","checkValue","ModalContext","withRouter","isActive","setStyleButtonTabSignIn","setStyleButtonRegister","setStyleTabsSlider","formLoginStyle","setFormLoginStyle","formRegisterStyle","setFormRegisterStyle","left","right","setEyeShowHide","setShowPasswordOrText","ModalWithReducer","modalState","text","Preloader","FirebaseContext","FirebaseProvide","Firebase","getDataUsers","usersList","setUsersList","dataUsersOnline","setDataUsersOnline","dataMessages","setDataMessages","on","createChatKey","arr","sort","join","BtnComeBack","backContacts","setShowFriendAvatar","useHistory","goBack","enableBackground","height","viewBox","width","xmlns","d","Avatar","status","charAt","toUpperCase","src","alt","UserName","Status","data-original","data-old_color","fill","Head","isActiveMessages","showStatus","showFriendAvatar","showStatusFriend","MessagesItem","author","timestamp","timeLastMessage","Date","toLocaleString","hour","minute","ButtonSend","SendArea","chatKey","setDisabled","message","setMessage","keyCtrl","setKeyCtrl","keyEnter","setKeyEnter","sendMessage","ServerValue","TIMESTAMP","sendMessageWithKeyboard","keyCode","prevState","onKeyDown","onKeyUp","autoFocus","bind","Messages","showMessages","values","i","messagesRender","LastMessage","lastMessage","reverse","TimeLastMessage","month","day","ContactCards","setShow","setUserFriend","setChatKey","contactCardRender","MessagesPreloader","useDencrypt","result","dencrypt","Contacts","firebaseInitialized","show","userFriend","showMessage","setShowMessage","classContacts","to","setFirebaseInitialized","getDataUsersOnline","isInitialized","App","path","exact","component","Auth","Home","Boolean","window","location","hostname","match","MODAL","PRELOADER","handlers","payload","modalReducer","DEFAULT","ModalState","useReducer","dispatch","modalShowHide","preloaderReducer","PreloaderState","second","time","setTimeout","application","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.02cd2fd6.chunk.js","sourcesContent":["import React, {useState} from 'react';\n\nexport const AuthContext = React.createContext();\n\nexport const AuthProvider = ({children}) => {\n\nconst [currentUser, setCurrentUser] = useState(null);\n\n  return (\n      <AuthContext.Provider\n          value={{\n            currentUser,\n            setCurrentUser\n          }}\n      >\n        {children}\n      </AuthContext.Provider>\n  );\n};\n\nAuthContext.displayName = \"Authorisation Context\";","import React from 'react';\nimport PropTypes from 'prop-types'\nimport classNames from \"classname\";\n\nconst MainButton = ({\n                      children, className, disabled, type, active, onClick, ...attrs\n                    }) => {\n  const onClickAction = (e) => {\n    disabled ? e.preventDefault() : onClick(e)\n  };\n  const classes = classNames(\n      className,\n      {active},\n  );\n  const Tag = attrs.href ? 'a' : 'button';\n  return (\n      <Tag\n          {...attrs}\n          className={classes}\n          type={type}\n          disabled={disabled}\n          onClick={onClickAction}\n      >\n        {children}\n      </Tag>\n  );\n};\nMainButton.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  active: PropTypes.bool\n};\nMainButton.defaultProps = {\n  children: 'Button',\n  onClick: () => {\n  },\n  className: '',\n  disabled: false,\n  active: false\n};\nexport default MainButton;\n","import React from 'react';\nimport MainButton from \"../../UI/Buttons/MainButton/MainButton\";\n\nconst FormTabs = (props) => {\n  const {styleTabsSlider, styleButtonTabSignIn, styleButtonTabRegister, setIsActive} = props;\n  return (\n      <section className=\"form-tabs\">\n        <div\n            style={styleTabsSlider}\n            className=\"form-tabs__slider\"\n        >\n        </div>\n        <MainButton\n            className=\"form-tabs__btn form-tabs__btn_sign-in\"\n            type=\"button\"\n            onClick={() => setIsActive(false)}\n            style={styleButtonTabRegister}\n        >\n          {\"Register\"}\n        </MainButton>\n\n        <MainButton\n            className=\"form-tabs__btn form-tabs__btn_register\"\n            type=\"button\"\n            onClick={() => setIsActive(true)}\n            style={styleButtonTabSignIn}\n        >\n          {\"Sign In\"}\n        </MainButton>\n      </section>\n  )\n};\nexport default FormTabs;","import * as firebase from 'firebase';\n\nconst app = firebase.initializeApp({\n  // apiKey: \"AIzaSyCsc_AjZW9cOes_qR0cua-eqxQe7vr6Zdg\",\n  // authDomain: \"react-chat-ae6f1.firebaseapp.com\",\n  // databaseURL: \"https://react-chat-ae6f1.firebaseio.com\",\n  // projectId: \"react-chat-ae6f1\",\n  // storageBucket: \"react-chat-ae6f1.appspot.com\",\n  // messagingSenderId: \"325134953358\",\n  // appId: \"1:325134953358:web:0bba053bafafdcc40612df\"\n\n\n  apiKey: \"AIzaSyAfaQ4g6h655mraikDPo0Dpz10YyJbgHps\",\n  authDomain: \"react-chat-79509.firebaseapp.com\",\n  databaseURL: \"https://react-chat-79509.firebaseio.com\",\n  projectId: \"react-chat-79509\",\n  storageBucket: \"react-chat-79509.appspot.com\",\n  messagingSenderId: \"843577064029\",\n  appId: \"1:843577064029:web:5364deffb6d407dfe2ebb4\",\n  measurementId: \"G-N479WRQ9F2\"\n\n});\n\nexport default app;","import app from '../../services/initFirebase';\n\nclass Firebase {\n  constructor() {\n    this.auth = app.auth;\n    this.db = app.database();\n    this.presence = app.database().ref('presence/');\n    this.users = app.database().ref('users/');\n    this.messages = app.database().ref('chats/');\n  }\n\n  async getDataUsers() {\n    try {\n      return app.database().ref('users/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          });\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async getDataUsersOnline() {\n    try {\n      return app.database().ref('presence/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          })\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async getDataMessages() {\n    try {\n      return app.database().ref('chats/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          })\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async registerInFirebase(email, password) {\n    try {\n      await app.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async login(email, password, name, history) {\n    try {\n      await app.auth().signInWithEmailAndPassword(email, password);\n      await app.auth().currentUser.updateProfile({\n        displayName: name\n      });\n      history.push('/home/');\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  logout() {\n    return this.auth.signOut()\n  }\n\n  addQuote(quote) {\n    if (!this.auth.currentUser) {\n      return alert('Not authorized')\n    }\n    return this.db.doc(`users_codedamn_video/${this.auth.currentUser.uid}`).set({\n      quote\n    })\n  }\n\n  isInitialized() {\n    return new Promise(resolve => {\n      app.auth().onAuthStateChanged(resolve)\n    })\n  }\n\n  async getCurrentUserQuote() {\n    const quote = await this.db.doc(`users_codedamn_video/${this.auth.currentUser.uid}`).get();\n    return quote.get('quote')\n  }\n\n  getCurrentUsername() {\n    if (app.auth().currentUser) {\n      return app.auth().currentUser.displayName\n    } else {\n      return null\n    }\n  }\n}\n\nexport default new Firebase();","import {createContext} from 'react';\n\nexport const PreloaderContext = createContext();\nPreloaderContext.displayName = 'Preloader Context';","import React from \"react\";\n\nconst wrapOverlay = (Component) => {\n  return (props) => {\n    return (\n        <section className={'wrapOverlay'}>\n          <Component {...props}/>\n        </section>\n    )\n  }\n};\nexport default wrapOverlay;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport wrapOverlay from \"../../hoc/wrapOverlay/wrapOverlay\";\nimport MainButton from \"../Buttons/MainButton/MainButton\";\n\nconst Modal = ({\n                 title, type, isOpen, onSubmit, children,\n               }) => {\n\n  return (\n      <>\n        { isOpen &&\n        <div className=\"modal-wrap\">\n          <div className=\"modal-header\">\n            <h1 className=\"header-title\">{title}</h1>\n          </div>\n          <div className=\"modal-body\">\n            {children}\n          </div>\n          <div className=\"modal-footer\">\n            <MainButton type={type}\n                        onClick={onSubmit}>Ok</MainButton>\n          </div>\n        </div>\n        }\n      </>\n  );\n};\n\nModal.propTypes = {\n  title: PropTypes.string,\n  type: PropTypes.string,\n  isOpen: PropTypes.bool,\n  onCancel: PropTypes.func,\n  onSubmit: PropTypes.func,\n  children: PropTypes.node,\n};\n\nModal.defaultProps = {\n  title: 'Modal title',\n  isOpen: false,\n  onSubmit: () => {},\n  children: null,\n};\n\nexport default wrapOverlay(Modal);","import React from 'react';\nimport classNames from 'classname';\n\nconst Input = ({\n                 children, id, type, inputClass, labelClass, onChange, ...attrs\n               }) => {\n  const classesInput = classNames(\n      inputClass\n  );\n  const classesLabel = classNames(\n      labelClass\n  );\n  const inputType = type || 'text';\n  return (\n      <>\n        <input\n            key={id}\n            type={inputType}\n            name={id}\n            id={id}\n            className={classesInput}\n            onChange={onChange ? onChange : () => {\n            }}\n            {...attrs}\n        />\n        {labelClass && <label\n            htmlFor={id}\n            className={classesLabel}\n        >\n          <span>{children}</span>\n\n        </label>}\n\n        {attrs.eye ? children : null}\n      </>\n  )\n};\nexport default Input","import React from 'react';\nimport classNames from 'classname';\nimport PropTypes from 'prop-types';\n\nconst Icon = ({\n                className, name, onClick, active, disabled, size, ...attrs\n              }) => {\n  const classI = classNames(\n      `fa`,\n      `fa-${name}`,\n      className,\n      active,\n      {disabled},\n      {func: onClick}\n  );\n  const iconSize = size ? {fontSize: `${size}rem`} : null;\n  return (\n      <>\n        <i className={classI}\n           onClick={disabled ? null : onClick}\n           style={iconSize}\n           {...attrs}\n        >\n        </i>\n      </>\n  )\n};\nIcon.propTypes = {\n  classNames: PropTypes.string,\n  name: PropTypes.string,\n  disabled: PropTypes.bool,\n  size: PropTypes.number,\n  onClick: PropTypes.func\n};\nIcon.defaultProps = {\n  name: '',\n  className: '',\n  size: null,\n  onClick: null,\n  disabled: false,\n};\nexport default Icon;","import React from \"react\";\n\nconst withClass = (Component, className, tag) => {\n  const Tag = tag ? tag : \"div\";\n  return (props) => {\n    return (\n        <Tag className={className}\n             style={props.style}\n        >\n          <Component {...props}/>\n        </Tag>\n    )\n  }\n};\nexport default withClass;\n","import React from 'react';\n\nconst Wrapper = (props) => {\n  const Tag = props.tag ? props.tag : \"div\",\n      className = props.className;\n  return (\n      <Tag className={className}>\n        {props.children}\n      </Tag>\n  )\n};\nexport default Wrapper;","import React, {useContext, useState, useEffect} from 'react';\nimport firebase from '../../Firebase/Firebase';\nimport {AuthContext} from '../../Context/authContext/AuthContext';\nimport {PreloaderContext} from '../../Context/preloaderContext/preloaderContext';\nimport Modal from \"../../UI/Modal/Modal\";\nimport Input from \"../../UI/Input/Input\";\nimport Icon from \"../../UI/IconEye/Icon\";\nimport MainButton from \"../../UI/Buttons/MainButton/MainButton\";\nimport withClass from \"../../hoc/withClass/withClass\";\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\n\nconst FormLogin = ({showPasswordOrText, eyeShowHide, checkEye, history}) => {\n  const {users, presence, login} = firebase;\n  const {hidePreloader, showPreloader} = useContext(PreloaderContext);\n  const {setCurrentUser} = useContext(AuthContext);\n  const [isOpen, setIsOpen] = useState(false),\n      [messageErrEmailOrUser, setMessageErrEmailOrUser] = useState(\"Error username or password\"),\n      [title, setTitle] = useState(\"Error username or password\"),\n      [count, setCount] = useState(3);\n  useEffect(() => {\n    if (isOpen && count > 0) {\n      const timer = setInterval(() => {\n        setCount(c => c - 1);\n      }, 1000);\n      return () => clearInterval(timer);\n    } else {\n      setCount(3);\n      setIsOpen(false)\n    }\n  }, [isOpen, count]);\n  const signIn = (event, name, password) => {\n    event.preventDefault();\n    showPreloader();\n    users.once(\"value\", (snapshot) => {\n      const dataUsers = snapshot.val();\n      if (!dataUsers[name]) {\n        setTitle(`ОШИБКА ${name}`);\n        setMessageErrEmailOrUser(`Пользователь ${name} не зарегистрирован. Просьба сначала зарегистрироваться`);\n        setIsOpen(true);\n        hidePreloader();\n      }\n      if (dataUsers[name] && password !== dataUsers[name].password) {\n        setTitle(`ОШИБКА`);\n        setMessageErrEmailOrUser(`Введите корректный пароль для пользователя ${name}`);\n        setIsOpen(true);\n        hidePreloader();\n      }\n      if (dataUsers[name] && password === dataUsers[name].password) {\n        const email = dataUsers[name].email;\n        presence.child(`/${name}`).update({\n          userName: name,\n          onlineStatus: true\n        });\n        presence.child(`/${name}`).onDisconnect().remove();\n        setCurrentUser(name);\n        //hidePreloader();\n        login(email, password, name, history);\n      }\n    });\n  };\n  const [usernameValue, setUsernameValue] = useState(\"\"),\n      [passwordValue, setPasswordValue] = useState(\"\");\n  const [userValid, setUserValid] = useState(false),\n      [passwordValid, setPasswordValid] = useState(false);\n  const [showButton, setShowButton] = useState(true);\n  useEffect(() => {\n    if (usernameValue.length >= 3) setUserValid(true);\n    else setUserValid(false)\n  }, [usernameValue]);\n  useEffect(() => {\n    if (passwordValue.length >= 6) setPasswordValid(true);\n    else setPasswordValid(false)\n  }, [passwordValue]);\n  useEffect(() => {\n    if (userValid && passwordValid) setShowButton(false);\n    else setShowButton(true);\n  }, [userValid, passwordValid]);\n  return (\n      <>\n        {isOpen && <Modal title={title}\n                          isOpen={isOpen}\n                          onSubmit={() => {\n                            setIsOpen(false);\n                          }}\n        >\n          <p>\n            {messageErrEmailOrUser}\n          </p>\n          <p>{count}</p>\n        </Modal>}\n        <form action=\"\">\n          <Wrapper className={'credentials-form-item'}\n                   tag={\"section\"}>\n            <Input\n                id=\"form-login_username\"\n                type=\"text\"\n                placeholder=\" \"\n                inputClass=\"credentials-form-item__text\"\n                labelClass=\"form__label\"\n                onChange={(event) => {\n                  setUsernameValue(event.target.value);\n                }}\n            >\n              <Icon name={\"sign-in\"}/>\n              {\"User name\"}\n            </Input>\n          </Wrapper>\n          <Wrapper className={'credentials-form-item'}\n                   tag={\"section\"}>\n            <Input\n                id=\"form-login_password\"\n                type={showPasswordOrText}\n                placeholder=\" \"\n                inputClass=\"credentials-form-item__text\"\n                labelClass=\"form__label\"\n                onChange={(event) => {\n                  setPasswordValue(event.target.value);\n                }}\n            >\n              <Icon name={\"key\"}/>\n              {\"Password\"}\n            </Input>\n            <Wrapper className={'form__eye'}\n                     tag={\"span\"}>\n              <Icon\n                  active={eyeShowHide || \"hide\"}\n                  name={\"eye-slash\"}\n                  onClick={checkEye}\n              />\n              <Icon\n                  active={!eyeShowHide || \"hide\"}\n                  name={\"eye\"}\n                  onClick={checkEye}\n              />\n            </Wrapper>\n          </Wrapper>\n          <Wrapper className={'credentials-form-item credentials-form-item__checkbox'}\n                   tag={\"section\"}>\n            <Input\n                inputClass=\"credentials-form-item_input\"\n                id=\"form-login_remember-me\"\n                type=\"checkbox\"\n                labelClass=\"form__label credentials-form-item_label\"\n            >\n              {\"Remember password\"}\n            </Input>\n          </Wrapper>\n          <MainButton\n              className=\"credentials-form__btn form-login__btn\"\n              disabled={showButton}\n              onClick={(event) => {\n                signIn(event, usernameValue, passwordValue)\n              }}\n          >\n            Sign in\n          </MainButton>\n        </form>\n      </>\n  )\n};\nexport default withClass(FormLogin, \"form-login\", \"section\");","import React, {Component} from 'react';\nimport firebase from '../../Firebase/Firebase';\nimport Input from '../../UI/Input/Input';\nimport MainButton from '../../UI/Buttons/MainButton/MainButton';\nimport Icon from '../../UI/IconEye/Icon';\nimport withClass from '../../hoc/withClass/withClass';\nimport Wrapper from '../../hoc/Wrapper/Wrapper';\n\nclass FormRegister extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataInput: {\n        username: {\n          name: 'form-register_username',\n          value: '',\n          type: 'text',\n          validLabel: 'User name',\n          label: 'User name',\n          errorMessage: 'Min 3 characters',\n          valid: false,\n          touched: false,\n          placeholder: \" \",\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"sign-in\",\n          validation: {\n            required: true,\n            minLength: 3\n          }\n        },\n        email: {\n          name: \"email\",\n          value: '',\n          type: 'email',\n          validLabel: 'Email',\n          label: 'Email',\n          errorMessage: 'Email is not valid',\n          valid: false,\n          placeholder: \" \",\n          touched: false,\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"envelope-o\",\n          validation: {\n            required: true,\n            email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n          }\n        },\n        password: {\n          name: \"password\",\n          value: '',\n          validLabel: 'Password',\n          label: 'Password',\n          errorMessage: 'Min 6 characters',\n          valid: false,\n          touched: false,\n          placeholder: \" \",\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"key\",\n          eye: true,\n          validation: {\n            required: true,\n            minLength: 6\n          }\n        },\n        checkbox: {\n          name: \"form-register_agree-terms-conditions\",\n          type: 'checkbox',\n          label: 'Agree terms conditions',\n          errorMessage: 'Click me',\n          valid: false,\n          wrapperClassName: \"credentials-form-item credentials-form-item__checkbox\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item_input\",\n          labelClass: \"form__label credentials-form-item_label\",\n          validation: {\n            required: true,\n            checked: false\n          }\n        },\n      },\n      formValid: false\n    };\n  }\n\n  checkValue(event, elem) {\n    const dataInput = {...this.state.dataInput};\n    const currentValue = event.target.value;\n    let formValid = true;\n    const switchLabel = (data) => {\n      if (data.touched) {\n        data.label = data.errorMessage\n      } else {\n        data.label = `${data.validLabel} success`\n      }\n    };\n    const addValidValue = (isElementValid) => {\n      if (isElementValid) {\n        dataInput[elem].valid = true;\n        dataInput[elem].touched = false;\n        dataInput[elem].value = currentValue;\n      } else {\n        dataInput[elem].valid = false;\n        dataInput[elem].touched = true;\n        dataInput[elem].value = '';\n      }\n    };\n    if (dataInput[elem].validation.required) {\n      switch (elem) {\n        case 'username' :\n          addValidValue(currentValue.length >= dataInput[elem].validation.minLength);\n          switchLabel(dataInput[elem]);\n          break;\n        case 'password' :\n          addValidValue(currentValue.length >= dataInput[elem].validation.minLength);\n          switchLabel(dataInput[elem]);\n          break;\n        case 'email' :\n          addValidValue(dataInput[elem].validation.email.test(currentValue));\n          switchLabel(dataInput[elem]);\n          break;\n        case 'checkbox' :\n          if (event.target.checked) {\n            dataInput[elem].valid = true;\n          } else dataInput[elem].valid = false;\n          break;\n      }\n    }\n    Object.keys(dataInput).forEach(type => {\n      formValid = dataInput[type].valid && formValid;\n    });\n    this.setState({dataInput, formValid})\n  };\n\n  onRegister = (name, email, password) => {\n    firebase.registerInFirebase(name, email, password)\n  };\n  registration = (event, name, email, password, showPreloader, hidePreloader, modalShow, modalHide, users, setIsActive) => {\n    event.preventDefault();\n    showPreloader(3);\n    const checkEmailToDatabase = (data) => {\n      let checkEmail = true;\n      Object.keys(data).forEach((user) => {\n        if (data[user].email === email) {\n          hidePreloader();\n          modalShow(`ОШИБКА ${email}`, `Email ${email} уже использован в системе, просьба использовать другой адрес`);\n          return checkEmail = false;\n        }\n      });\n      return checkEmail\n    };\n    const checkLoginToDatabase = (data) => {\n      if (data[name]) {\n        hidePreloader();\n        modalShow(`ОШИБКА ${name}`, `Пользователь ${name} уже создан в системе, просьба выбрать другое имя`);\n        return false\n      }\n      return true\n    };\n    users.once(\"value\", (snapshot) => {\n          const dataUsers = snapshot.val();\n          if (checkLoginToDatabase(dataUsers) && checkEmailToDatabase(dataUsers)) {\n            const newUser = users.child(`/${name}`);\n            newUser.update({\n              userName: name,\n              email: email,\n              password: password,\n            });\n            hidePreloader();\n            this.onRegister(email, password);\n            modalShow(`Поздравляем!`, `Пользователь \"${name}\" успешно зарегистрирован! Просьба войти в систему`);\n            setIsActive((preAction) => !preAction);\n          }\n        }\n    );\n  };\n\n  render() {\n    const {users} = firebase;\n    const {showPasswordOrText, eyeShowHide, checkEye, hidePreloader, showPreloader, modalHide, modalShow, setIsActive} = this.props;\n    const inputRender = () => {\n      const inputs = Object.keys(this.state.dataInput).map((elem, index) => {\n        const currentDataInput = this.state.dataInput[elem];\n        return (\n            <Wrapper className={currentDataInput.wrapperClassName}\n                     tag={\"section\"}\n                     key={currentDataInput.wrapperClassName + index}>\n              <Input\n                  key={elem + index}\n                  id={currentDataInput.name}\n                  type={currentDataInput.type ? currentDataInput.type : showPasswordOrText}\n                  placeholder={currentDataInput.placeholder ? currentDataInput.placeholder : null}\n                  inputClass={currentDataInput.inputClass}\n                  labelClass={currentDataInput.labelClass}\n                  onChange={(event) => this.checkValue(event, elem)}\n              >\n                <Icon name={currentDataInput.iClass}/>\n                {currentDataInput.label}\n              </Input>\n              {!currentDataInput.eye ? null : (\n                  <span className=\"form__eye\">\n                    <Icon\n                        active={eyeShowHide || \"hide\"}\n                        name={\"eye-slash\"}\n                        onClick={checkEye}\n                    />\n                    <Icon\n                        active={!eyeShowHide || \"hide\"}\n                        name={\"eye\"}\n                        onClick={checkEye}\n                    />\n                  </span>\n              )}\n            </Wrapper>\n        )\n      });\n      return inputs\n    };\n    return (\n        <form>\n          {inputRender()}\n          <MainButton\n              className=\"credentials-form__btn form-register__btn\"\n              disabled={!this.state.formValid}\n              onClick={(event) => {\n                this.registration(event,\n                    this.state.dataInput.username.value,\n                    this.state.dataInput.email.value,\n                    this.state.dataInput.password.value,\n                    showPreloader,\n                    hidePreloader,\n                    modalShow,\n                    modalHide,\n                    users,\n                    setIsActive)\n              }}\n          >\n            Register\n          </MainButton>\n        </form>\n    )\n  }\n}\n\nexport default withClass(FormRegister, \"form-register\", \"section\");","import {createContext} from 'react';\n\nexport const ModalContext = createContext();\nModalContext.displayName = \"ModalWithReducer Context\";","import React, {useState, useContext, useEffect} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport FormTabs from \"./FormTabs/FormTabs\";\nimport FormLogin from \"./FormLogin/FormLogin\";\nimport FormRegister from \"./FormRegister/FormRegister\";\nimport {PreloaderContext} from '../Context/preloaderContext/preloaderContext';\nimport {ModalContext} from '../Context/modalContext/modalContext';\n\nconst Auth = ({history}) => {\n  const {modalHide, modalShow} = useContext(ModalContext);\n  const {hidePreloader, showPreloader} = useContext(PreloaderContext);\n  const [isActive, setIsActive] = useState();\n  useEffect(() => {\n    hidePreloader();\n  });\n  const [styleButtonTabSignIn, setStyleButtonTabSignIn] = useState({}),\n      [styleButtonTabRegister, setStyleButtonRegister] = useState({}),\n      [styleTabsSlider, setStyleTabsSlider] = useState({}),\n      [formLoginStyle, setFormLoginStyle] = useState({}),\n      [formRegisterStyle, setFormRegisterStyle] = useState({});\n  useEffect(() => {\n    if (isActive) {\n      setStyleTabsSlider({\n        'left': '110px',\n        'background': 'linear-gradient(to right, #015d53, #ce5e22)'\n      });\n      setStyleButtonTabSignIn({\n        'color': '#ECEFF1'\n      });\n      setStyleButtonRegister({\n        'color': '#000000'\n      });\n      setFormLoginStyle({\n        left: '400px'\n      });\n      setFormRegisterStyle({\n        right: '0px'\n      });\n    }\n    if (!isActive) {\n      setStyleTabsSlider({\n        'left': '0px',\n        'background': 'linear-gradient(to right, #ce5e22,  #015d53)'\n      });\n      setStyleButtonTabSignIn({\n        'color': '#000000'\n      });\n      setStyleButtonRegister({\n        'color': '#ECEFF1'\n      });\n      setFormLoginStyle({\n        left: '0px'\n      });\n      setFormRegisterStyle({\n        right: '400px'\n      });\n    }\n  }, [isActive]);\n  const [eyeShowHide, setEyeShowHide] = useState(true); //\n  const [showPasswordOrText, setShowPasswordOrText] = useState('password');\n  const checkEye = () => {\n    setEyeShowHide(!eyeShowHide);\n    if (showPasswordOrText === \"password\") {\n      setShowPasswordOrText('text');\n    } else {\n      setShowPasswordOrText('password');\n    }\n  };\n  return (\n      <section className=\"authorisation\">\n        <div className=\"sign-in-up-form\">\n\n          <FormTabs styleTabsSlider={styleTabsSlider}\n                    styleButtonTabSignIn={styleButtonTabSignIn}\n                    styleButtonTabRegister={styleButtonTabRegister}\n                    setIsActive={setIsActive}/>\n\n          {isActive && <FormLogin style={formLoginStyle}\n                                  showPasswordOrText={showPasswordOrText}\n                                  eyeShowHide={eyeShowHide}\n                                  checkEye={checkEye}\n                                  history={history}/>}\n\n          {!isActive && <FormRegister style={formRegisterStyle}\n                                      showPasswordOrText={showPasswordOrText}\n                                      eyeShowHide={eyeShowHide}\n                                      checkEye={checkEye}\n                                      hidePreloader={hidePreloader}\n                                      showPreloader={showPreloader}\n                                      modalHide={modalHide}\n                                      modalShow={modalShow}\n                                      setIsActive={setIsActive}/>}\n        </div>\n      </section>\n  )\n};\nexport default withRouter(Auth);","import React, {useContext} from 'react';\nimport {ModalContext} from \"../../Context/modalContext/modalContext\";\nimport MainButton from \"../Buttons/MainButton/MainButton\";\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\n\nconst ModalWithReducer = () => {\n  const {modalState, modalHide} = useContext(ModalContext);\n  if (!modalState) return null;\n  return (\n      <Wrapper\n          tag={'section'}\n          className={'wrapOverlay'}\n      >\n        <div className=\"modal-wrap\">\n          <div className=\"modal-header\">\n            <h1 className=\"header-title\">{modalState.title}</h1>\n          </div>\n          <div className=\"modal-body\">\n            {modalState.text}\n            {modalState.count ?\n                <p>\n                  {modalState.count}\n                </p>\n                : null}\n          </div>\n          <div className=\"modal-footer\">\n            <MainButton\n                type={'button'}\n                onClick={modalHide}>Ok</MainButton>\n          </div>\n        </div>\n      </Wrapper>\n  );\n};\n\nexport default ModalWithReducer;\n\n","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\nimport {PreloaderContext} from '../../Context/preloaderContext/preloaderContext'\n\nexport const Preloader = () => {\n  const {state} = useContext(PreloaderContext);\n  if (state) return null;\n  return (\n      <Wrapper\n          tag={'section'}\n          className={'wrapOverlay'}\n      >\n        <div className=\"container\">\n          <div className=\"item-1\"/>\n          <div className=\"item-2\"/>\n          <div className=\"item-3\"/>\n          <div className=\"item-4\"/>\n          <div className=\"item-5\"/>\n        </div>\n      </Wrapper>\n  )\n};\nPreloader.propTypes = {\n  state: PropTypes.bool\n};\nPreloader.defaultProps = {\n  state: false\n};","import React, {useState, useEffect, useContext} from 'react';\nimport Firebase from \"../../Firebase/Firebase\";\nimport {AuthContext} from \"../authContext/AuthContext\";\n\nexport const FirebaseContext = React.createContext();\nexport const FirebaseProvide = ({children}) => {\n  const {currentUser} = useContext(AuthContext);\n  const {messages, getDataUsers} = Firebase;\n  const [usersList, setUsersList] = useState();\n  const [dataUsersOnline, setDataUsersOnline] = useState();\n  const [dataMessages, setDataMessages] = useState();\n  useEffect(() => {\n    getDataUsers().then((data) => {\n      let users = Object.keys(data);\n      setUsersList(users);\n    });\n  }, [dataUsersOnline]);\n  useEffect(() => {\n    messages.on('value', snapshot => {\n      setDataMessages(snapshot.val());\n    }, []);\n  }, []);\n\n  function createChatKey(user) {\n    if (!currentUser) throw new Error('myUsername has not been set!');\n    let arr = [];\n    arr.push(user, currentUser);\n    arr.sort();\n    return arr.join('__');\n  }\n\n  return (\n      <FirebaseContext.Provider\n          value={{\n            usersList,\n            dataMessages,\n            setDataMessages,\n            dataUsersOnline,\n            createChatKey,\n            setDataUsersOnline\n          }}\n      >\n        {children}\n      </FirebaseContext.Provider>\n  );\n};\nFirebaseContext.displayName = \"Firebase Context\";\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nconst BtnComeBack = ({backContacts, className, setShowFriendAvatar, user}) => {\n  let history = useHistory();\n  return (\n      <section className={`${className === 'show' ? 'hide' : 'show'} btn-come-back`}\n               onClick={() => {\n                 backContacts('show');\n                 setShowFriendAvatar(user);\n                 history.goBack();\n               }}\n      >\n        <svg id=\"Capa_1\" enableBackground=\"new 0 0 551.13 551.13\" height=\"512\" viewBox=\"0 0 551.13 551.13\" width=\"512\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"m189.451 275.565 223.897-223.897v-51.668l-275.565 275.565 275.565 275.565v-51.668z\"/>\n        </svg>\n      </section>\n  )\n};\nexport default BtnComeBack;\n\n","import React from 'react';\n\nfunction Avatar({className, user, status}) {\n  function firstChar(str) {\n    return str.charAt(0).toUpperCase()\n  }\n\n  const currentUser = firstChar(user);\n  return (\n      <section className={`avatar ${className}_avatar`}>\n        <img src=\"https://i.ibb.co/NtGCFM2/Group-77.png\" alt='user avatar'/>\n        <section className={`avatar-item ${status}`}>\n          {currentUser}\n        </section>\n      </section>\n  )\n}\n\nexport default Avatar;","import React from 'react';\nimport classNames from 'classname';\nimport PropTypes from 'prop-types';\n\nconst UserName = ({className, name}) => {\n  const classes = classNames(\n      className, name\n  );\n  return (\n      <section className={classes}>\n        {name}\n      </section>\n  )\n};\nUserName.propTypes = {\n  className: PropTypes.string,\n  name: PropTypes.string\n};\nUserName.defaultProps = {\n  className: 'contacts-card__user-name',\n  name: ''\n};\nexport default UserName;","import React from 'react';\n\nconst Status = ({className, status, isActive}) => {\n  return (\n      <section className={`${className} ${isActive}`}>\n        <section className={status}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"512px\" viewBox=\"0 -32 512.00011 512\" width=\"512px\">\n            <g>\n              <path\n                  d=\"m342.382812 239.351562c-23.039062-35.941406-62.277343-57.402343-104.964843-57.402343s-81.925781 21.460937-104.960938 57.402343l-55.515625 86.605469c-9.210937 14.367188-13.460937 30.96875-12.292968 47.996094 1.167968 17.03125 7.648437 32.890625 18.738281 45.875 11.097656 12.972656 25.761719 21.839844 42.40625 25.644531 16.644531 3.804688 33.707031 2.179688 49.339843-4.691406l1.046876-.464844c39.335937-16.945312 84.285156-16.789062 123.519531.464844 10.121093 4.449219 20.84375 6.699219 31.664062 6.699219 5.882813 0 11.800781-.667969 17.664063-2.003907 16.644531-3.800781 31.308594-12.667968 42.410156-25.644531 11.09375-12.972656 17.578125-28.835937 18.75-45.871093 1.171875-17.035157-3.078125-33.632813-12.289062-48.007813zm0 0\"\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\n              <path\n                  d=\"m91.894531 239.238281c16.515625-6.34375 29.0625-19.652343 35.328125-37.476562 5.964844-16.960938 5.476563-36.109375-1.378906-53.921875-6.859375-17.800782-19.335938-32.332032-35.132812-40.921875-16.59375-9.019531-34.824219-10.488281-51.3125-4.132813-33.171876 12.753906-48.394532 53.746094-33.929688 91.398438 11.554688 29.96875 38.503906 48.886718 65.75 48.886718 6.957031 0 13.933594-1.234374 20.675781-3.832031zm0 0\"\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\n              <path\n                  d=\"m199.613281 171.386719c41.46875 0 75.207031-38.4375 75.207031-85.683594 0-47.257813-33.738281-85.703125-75.207031-85.703125-41.464843 0-75.199219 38.445312-75.199219 85.703125 0 47.246094 33.734376 85.683594 75.199219 85.683594zm0 0\"\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\n              <path\n                  d=\"m329.496094 192.4375h.003906c6.378906 2.117188 12.886719 3.128906 19.367188 3.128906 30.242187 0 59.714843-22.011718 70.960937-55.839844 6.476563-19.472656 6.050781-40.0625-1.199219-57.972656-7.585937-18.75-21.644531-32.359375-39.589844-38.324218-17.949218-5.964844-37.359374-3.476563-54.660156 7-16.527344 10.007812-29.191406 26.246093-35.660156 45.71875-13.652344 41.078124 4.640625 84.273437 40.777344 96.289062zm0 0\"\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\n              <path\n                  d=\"m487.875 182.4375-.011719-.011719c-28.597656-21.125-71.367187-11.96875-95.347656 20.421875-23.957031 32.40625-20.210937 75.972656 8.34375 97.113282 10.414063 7.714843 22.71875 11.402343 35.3125 11.402343 21.949219 0 44.785156-11.203125 60.050781-31.804687 23.953125-32.40625 20.210938-75.972656-8.347656-97.121094zm0 0\"\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\n            </g>\n          </svg>\n        </section>\n      </section>\n  )\n};\nexport default Status;","import React, {useState, useEffect} from 'react';\nimport BtnComeBack from './BtnComeBack/BtnComeBack.js'\nimport Avatar from \"./Avatar/Avatar\";\nimport UserName from \"./UserName/UserName\";\nimport Status from \"../Status/Status\";\n\nconst Head = ({user, className, status, backContacts, isActiveMessages, showStatus, currentUser}) => {\n  const [showFriendAvatar, setShowFriendAvatar] = useState(currentUser);\n  useEffect(() => {\n    if (user) {\n      setShowFriendAvatar(user)\n    } else {\n      setShowFriendAvatar(currentUser)\n    }\n  }, [user]);\n  const showStatusFriend = showStatus === 'show' ? 'hide' : 'show';\n  return (\n      <header className=\"header\">\n        <BtnComeBack backContacts={backContacts}\n                     setShowFriendAvatar={setShowFriendAvatar}\n                     user={currentUser}\n                     className={isActiveMessages}\n        />\n        <div className={`header-kitty-wrap ${isActiveMessages}`}>\n          <img className=\"header-kitty\" src=\"https://clipartart.com/images/angery-cat-clipart-3.png\" alt='chat avatar'/>\n          <h1 className={`header__chat-name ${showStatus}`}>Kitty chat<span>by Maxim S.</span></h1>\n        </div>\n        <div className='header-user-wrap'>\n          <div className=\"header-avatar_wrap\">\n\n            <Avatar className='header-avatar'\n                    user={showFriendAvatar || currentUser || ''}\n                    status={status}/>\n\n            <UserName className={className}\n                      name={isActiveMessages === 'hide' && user || ''}/>\n          </div>\n          <Status className={`${showStatusFriend} header__status`}\n                  isActive={isActiveMessages === 'hide' && user || ''}\n                  status={status}/>\n        </div>\n      </header>\n  )\n};\nexport default Head;\n\n\n\n\n","import React from 'react';\n\nconst MessagesItem = ({author, text, timestamp, user}) => {\n  if (author && text && timestamp) {\n    const options = {hour: '2-digit', minute: '2-digit'};\n    const timeLastMessage = new Date(timestamp).toLocaleString('en-GB', options);\n    return (\n        <section className={author === user ? 'my-message-wrap' : 'friend-message-wrap'}\n                 key={author + timestamp}\n        >\n          <section className={'container-inline'}>\n            <p>{text}</p>\n            <section className=\"message-item__time\">{timeLastMessage}</section>\n          </section>\n        </section>\n    )\n  } else {\n    return null\n  }\n};\nexport default MessagesItem;\n\n","import React from 'react';\n\nconst ButtonSend = ({onClick, disabled}) => {\n  return (\n      <section className=\"button-send-wrap\">\n        <button className=\"messages-footer__button-send\"\n                value=\"push\"\n                onClick={(event) => onClick(event)}\n                disabled={disabled}\n        >\n          Meow!\n        </button>\n      </section>\n  )\n};\nexport default ButtonSend;\n","import React, {useState, useEffect} from 'react';\nimport ButtonSend from \"../ButtonSend/ButtonSend\";\nimport Firebase from \"../../Firebase/Firebase\";\nimport firebase from \"firebase\";\n\nconst SendArea = ({chatKey, currentUser}) => {\n  const {messages} = Firebase;\n  const [disabled, setDisabled] = useState(true);\n  const [message, setMessage] = useState('');\n  const [keyCtrl, setKeyCtrl] = useState(false);\n  const [keyEnter, setKeyEnter] = useState(false);\n  useEffect(() => {\n    setDisabled(message.length < 1)\n  }, [message]);\n  useEffect(() => {\n    if (keyEnter && keyCtrl) {\n    }\n  }, [keyCtrl, keyEnter]);\n\n  function sendMessage(event) {\n    event.preventDefault();\n    messages.once(\"value\", () => {\n      const newMessagesRef = messages.child(`/${chatKey}/messages`);\n      newMessagesRef.push({\n        author: currentUser,\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\n        text: message\n      });\n    });\n    setMessage('');\n  }\n\n  function sendMessageWithKeyboard(event) {\n    if (event.keyCode === 13) {\n      setKeyEnter(prevState => !prevState);\n    }\n    if (event.keyCode === 17) {\n      setKeyCtrl(prevState => !prevState);\n    }\n    if (keyEnter && keyCtrl) {\n      sendMessage(event);\n    }\n  }\n\n  return (\n      <>\n        <section className=\"send-area-wrap\"\n                 onKeyDown={(e) => {\n                   sendMessageWithKeyboard(e);\n                 }}\n                 onKeyUp={(e) => {\n                   sendMessageWithKeyboard(e);\n                 }}\n        >\n          <label htmlFor=\"messages-footer__send-area\">\n\n          </label>\n          <textarea name=\"\"\n                    id=\"messages-footer__send-area\"\n                    className=\"messages-footer__send-area\"\n                    placeholder=\"Enter you message and press Ctr+Enter...\"\n                    autoFocus\n                    required\n                    value={message}\n                    onChange={(event) => setMessage(event.target.value)}>\n\n          </textarea>\n        </section>\n        <ButtonSend onClick={sendMessage.bind(this)}\n                    disabled={disabled}\n        />\n      </>\n  )\n};\nexport default SendArea;\n","import React from 'react';\nimport MessagesItem from \"./MessagesItem/MassagesItem\";\nimport SendArea from \"./SendArea/SendArea\";\nimport Firebase from \"../Firebase/Firebase\";\n\nconst Messages = ({user, chatKey, isActive}) => {\n  const {messages} = Firebase;\n  const showMessages = isActive === 'show' ? 'hide' : 'show';\n  const messagesRender = () => {\n    let dataMessages = {};\n    messages.on('value', snapshot => {\n      dataMessages = snapshot.val();\n    });\n    if (dataMessages[chatKey]) {\n      const message = Object.values(dataMessages[chatKey].messages).map((e, i) => {\n        return (\n            <MessagesItem author={e.author}\n                          text={e.text}\n                          timestamp={e.timestamp}\n                          key={e.timestamp + e.author}\n                          user={user}/>\n        )\n      });\n      return message;\n    } else {\n      return null\n    }\n  };\n  return (\n      <article className={`messages ${showMessages}`}>\n        <main className=\"messages-text\">\n          <div className=\"messages-text_inner\">\n            {messagesRender()}\n          </div>\n        </main>\n        <footer className=\"messages-footer\">\n          <form action=\"\">\n            <section className=\"form-wrap\">\n              <SendArea currentUser={user} chatKey={chatKey}/>\n            </section>\n          </form>\n        </footer>\n      </article>\n  )\n};\nexport default Messages;\n","import React from 'react';\n\nconst LastMessage = ({dataMessages}) => {\n  const getLastMessage = (data) => {\n    const key = 'messages';\n    return Object.values(data[key]).reverse()[0].text\n  };\n  const lastMessage = getLastMessage(dataMessages);\n  if (!lastMessage) return null;\n  return (\n      <section className=\"contacts-card__last-message\">\n        {lastMessage}\n      </section>\n  )\n};\nexport default LastMessage;","import React from 'react';\n\nconst TimeLastMessage = ({dataMessages}) => {\n  const getTimeLastMessage = (data) => {\n    const key = 'messages';\n    return Object.values(data[key]).reverse()[0].timestamp\n  };\n  const options = {month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit'};\n  const timeLastMessage = new Date(getTimeLastMessage(dataMessages, 'messages')).toLocaleString('en-GB', options);\n  if (!timeLastMessage) return null;\n  return (\n      <section className=\"contacts-card__time-last-message\">\n        {timeLastMessage}\n      </section>\n  )\n};\nexport default TimeLastMessage;","import React from 'react';\nimport Avatar from \"../Head/Avatar/Avatar\";\nimport UserName from \"../Head/UserName/UserName\";\nimport LastMessage from \"../LastMessage/LastMessage\";\nimport Status from \"../Status/Status\";\nimport TimeLastMessage from \"../LastMessage/TimeLastMessage/TimeLastMessage\";\nimport Firebase from \"../Firebase/Firebase\";\nimport {useHistory} from 'react-router-dom';\n\nconst ContactCards = ({usersList, currentUser, dataUsersOnline, createChatKey, setShow, setUserFriend, setChatKey}) => {\n  const {messages} = Firebase;\n  let history = useHistory();\n  const contactCardRender = (data) => {\n    let dataMessages = {};\n    messages.on('value', snapshot => {\n      dataMessages = snapshot.val();\n    }, []);\n    const contactCard = usersList.map((user) => {\n      const chatKey = createChatKey(user);\n      if (currentUser === user) {\n        return null;\n      }\n      return (\n          <section className=\"contacts-card\"\n                   key={`contacts-card_${user}`}\n                   onClick={() => {\n                     setUserFriend(user);\n                     setChatKey(chatKey);\n                     setShow('hide');\n                     history.push(`/home/${chatKey}/`);\n                   }}>\n\n            <Avatar className='contacts-card'\n                    user={user}\n                    key={`contacts-card-avatar_${user}`}\n                    status={data[user] ? 'status_online' : 'status_offline'}/>\n\n            <div className=\"contacts-card__info\">\n              <div className=\"contacts-card__info-items\">\n                <UserName className='contacts-card__user-name' name={user} key={`contacts-card__user-name_${user}`}/>\n                <Status className={'contacts-card__status'}\n                        status={data[user] ? 'status_online' : 'status_offline'}\n                        key={`contacts-card__status_${user}`}/>\n              </div>\n              <div className=\"contacts-card__info-items\">\n                {dataMessages[chatKey] &&\n                <LastMessage dataMessages={dataMessages[chatKey]} key={`contacts-card__last-message_${user}`}/>}\n                {dataMessages[chatKey] &&\n                <TimeLastMessage dataMessages={dataMessages[chatKey]}\n                                 key={`contacts-card__time-last-message_${user}`}/>}\n              </div>\n            </div>\n          </section>\n      )\n    });\n    return contactCard;\n  };\n  return (\n      <div>\n        {usersList && currentUser && dataUsersOnline && contactCardRender(dataUsersOnline)}\n      </div>\n  )\n};\nexport default ContactCards;","import React from \"react\";\nimport {useDencrypt} from \"use-dencrypt-effect\";\n\nconst values = [\"Для начала общения нажмите на любого пользователя\"];\nconst MessagesPreloader = () => {\n  const {result, dencrypt} = useDencrypt();\n  React.useEffect(() => {\n    let i = 0;\n    const action = setInterval(() => {\n      dencrypt(values[i]);\n      i = i === values.length - 1 ? 0 : i + 1;\n    }, 1000);\n    return () => clearInterval(action);\n  }, []);\n  return (\n      <div className='messages-preloader'>\n        <h2 className='messages-preloader__title'>{result}</h2>\n      </div>\n  );\n};\nexport default MessagesPreloader;","import React, {useContext, useState, useEffect} from 'react';\nimport classNames from 'classname';\nimport {FirebaseContext} from \"../Context/firebaseContext/FirebaseContext\";\nimport Head from \"../Head/Head\";\nimport Messages from \"../Messages/Messages\";\nimport ContactCards from \"../ContactCard/ContactCards\";\nimport MessagesPreloader from \"../../pages/MessagesPreloader\";\nimport {Redirect} from 'react-router-dom';\n\nconst Contacts = ({firebaseInitialized, dataUsersOnline, currentUser}) => {\n  const {usersList, createChatKey} = useContext(FirebaseContext);\n  const [show, setShow] = useState('show');\n  const [userFriend, setUserFriend] = useState();\n  const [chatKey, setChatKey] = useState();\n  const [showMessage, setShowMessage] = useState();\n  let classContacts = classNames(\n      'contacts',\n      'contacts-wrap',\n  );\n  useEffect(() => {\n    if (userFriend && chatKey) setShowMessage(true)\n  }, [userFriend, chatKey]);\n  return firebaseInitialized ? (\n      <>\n        <Head className=\"contacts-card__user-name_in-header\"\n              user={userFriend}\n              status={userFriend && dataUsersOnline[userFriend] ? 'status_online' : 'status_offline'}\n              backContacts={setShow}\n              isActiveMessages={show}\n              showStatus={show}\n              currentUser={currentUser}/>\n\n        <main className='main'>\n          <nav className={`${classContacts} ${show}`}>\n            <ContactCards usersList={usersList}\n                          currentUser={currentUser}\n                          dataUsersOnline={dataUsersOnline}\n                          createChatKey={createChatKey}\n                          setShow={setShow}\n                          setUserFriend={setUserFriend}\n                          setChatKey={setChatKey}/>\n          </nav>\n\n          {showMessage && <Messages user={currentUser} chatKey={chatKey} isActive={show}/> || <MessagesPreloader/>}\n        </main>\n      </>\n  ) : <Redirect to=\"/\"/>\n};\nexport default Contacts;","import React, {useContext, useEffect, useState} from 'react';\nimport {AuthContext} from '../components/Context/authContext/AuthContext';\nimport {PreloaderContext} from '../components/Context/preloaderContext/preloaderContext';\nimport Contacts from '../components/Contacts/Contacts';\nimport firebase from \"../components/Firebase/Firebase\";\nimport {withRouter, Redirect} from 'react-router-dom';\nimport Firebase from \"../components/Firebase/Firebase\";\n\nconst Home = () => {\n  const {currentUser, setCurrentUser} = useContext(AuthContext);\n  const {showPreloader, hidePreloader} = useContext(PreloaderContext);\n  const [dataUsersOnline, setDataUsersOnline] = useState(null);\n  const [firebaseInitialized, setFirebaseInitialized] = useState(true);\n  const {getDataUsersOnline, presence} = Firebase;\n  useEffect(() => {\n    firebase.isInitialized().then(val => {\n      setCurrentUser(() => val.displayName);\n      setFirebaseInitialized(val);\n    });\n  });\n  useEffect(() => {\n    if (!dataUsersOnline ?? currentUser) {\n      presence.child(`/${currentUser}`).update({\n        'userName': currentUser,\n        'onlineStatus': true\n      });\n      presence.child(`/${currentUser}`).onDisconnect().remove();\n      presence.on('child_added', snapshot => {\n        getDataUsersOnline().then((snapshot) => {\n          setDataUsersOnline(snapshot);\n        });\n      });\n      presence.on('child_removed', snapshot => {\n        getDataUsersOnline().then((snapshot) => {\n          setDataUsersOnline(snapshot);\n        });\n      });\n    }\n  });\n  useEffect(() => {\n    firebaseInitialized ? hidePreloader() : showPreloader();\n  }, []);\n  return firebaseInitialized ?\n      <Contacts firebaseInitialized={firebaseInitialized} dataUsersOnline={dataUsersOnline} currentUser={currentUser}/>\n      : <Redirect to=\"/\"/>\n};\nexport default withRouter(Home);","import React from 'react';\nimport {Switch, Route, Redirect} from \"react-router-dom\";\nimport {AuthProvider} from './components/Context/authContext/AuthContext'\nimport './styles/style.css';\nimport Auth from \"./components/Auth/Auth\";\nimport ModalWithReducer from \"./components/UI/Modal/ModalWithReducer\";\nimport {Preloader} from \"./components/UI/Preloader/Preloader\";\nimport Home from \"./pages/Home\";\nimport {FirebaseProvide} from \"./components/Context/firebaseContext/FirebaseContext\";\n\nfunction App() {\n  return (\n      <AuthProvider>\n        <FirebaseProvide>\n          <Preloader/>\n          <ModalWithReducer/>\n          <Switch>\n            <Route path='/'\n                   exact\n                   component={Auth}\n            />\n            <Route path='/home/'\n                   component={Home}/>\n            <Redirect to='/'/>\n          </Switch>\n        </FirebaseProvide>\n      </AuthProvider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n              'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                    'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                );\n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n            response.status === 404 ||\n            (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n            'No internet connection found. App is running in offline mode.'\n        );\n      });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const MODAL = {\n  SHOW_MODAL: 'SHOW',\n  HIDE_MODAL: 'HIDE',\n  SHOW_MODAL_HIDE: 'SHOW'\n};\n\nexport const PRELOADER = {\n  ISLOADING: 'SHOW',\n  ISLOADED: 'HIDE'\n};","import {MODAL} from \"../type\";\n\nconst handlers = {\n  [MODAL.SHOW_MODAL]: (state, action) => {\n    return action.payload\n  },\n  [MODAL.HIDE_MODAL]: () => null,\n  [MODAL.SHOW_MODAL_HIDE]: (state, action) => {\n    return action.payload\n  },\n  DEFAULT: state => state\n};\n\nexport const modalReducer = (state, action) => {\n  const handler = handlers[action.type] || handlers.DEFAULT;\n  return handler(state, action);\n};","import React, {useReducer} from 'react';\nimport {ModalContext} from \"./modalContext\";\nimport {modalReducer} from \"./modalReducer\";\nimport {MODAL} from \"../type\";\n\nexport const ModalState = ({children}) => {\n  const [state, dispatch] = useReducer(modalReducer, null);\n  const modalShow = (title, text) => {\n    dispatch({\n      type: MODAL.SHOW_MODAL,\n      payload: {title, text}\n    })\n  };\n  const modalHide = () => dispatch({type: MODAL.HIDE_MODAL});\n  const modalShowHide = (title, text, count) => {\n    dispatch({\n      type: MODAL.SHOW_MODAL_HIDE,\n      payload: {title, text, count}\n    });\n  };\n  return (\n      <ModalContext.Provider value={{\n        modalHide,\n        modalShow,\n        modalShowHide,\n        modalState: state\n      }}>\n        {children}\n      </ModalContext.Provider>\n  )\n};","import {PRELOADER} from '../type';\n\nconst handlers = {\n  [PRELOADER.ISLOADING]: (state, action) => {\n    return action.payload\n  },\n  [PRELOADER.ISLOADED]: () => null,\n  DEFAULT: state => state\n};\n\nexport const preloaderReducer = (state, action) => {\n  const result = handlers[action.type] || handlers.DEFAULT;\n  return result(state, action);\n};","import React, {useReducer} from 'react';\nimport {preloaderReducer} from './preloaderReducer';\nimport {PreloaderContext} from './preloaderContext';\nimport {PRELOADER} from '../type';\n\nexport const PreloaderState = ({children}) => {\n  const [state, dispatch] = useReducer(preloaderReducer, null);\n  const hidePreloader = (second) => {\n    let time = second * 1000;\n    if (!second) time = 1500;\n    setTimeout(() => {\n      dispatch({\n        type: PRELOADER.ISLOADING,\n        payload: {second}\n      })\n    }, time);\n  };\n  const showPreloader = () => dispatch({type: PRELOADER.ISLOADED});\n  return (\n      <PreloaderContext.Provider value={{\n        showPreloader,\n        hidePreloader,\n        state\n      }}>\n        {children}\n      </PreloaderContext.Provider>\n  )\n};\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter as Router, HashRouter} from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\nimport {ModalState} from \"./components/Context/modalContext/ModalState\";\nimport {PreloaderState} from './components/Context/preloaderContext/PreloaderState';\n\nconst application = (\n    <HashRouter>\n      <PreloaderState>\n        <ModalState>\n          <App/>\n        </ModalState>\n      </PreloaderState>\n    </HashRouter>\n);\nReactDOM.render(application, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}